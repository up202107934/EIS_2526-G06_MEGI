<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Star Wars Miniatures Collection</title>
  <link rel="stylesheet" href="css/style.css">
  <!-- Fonte temÃ¡tica Star Wars -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">

 
</head>
<body>

    
    



  <!-- Banner -->
  <header class="collection-header">
    <div class="search-bar">
      <input type="text" placeholder="Search collections...">
      <button>ğŸ”</button>
    </div>
  </header>
  
  <!-- TÃ­tulo da coleÃ§Ã£o -->
  <h1 class="collection-title">Star Wars Miniatures</h1>
  <!-- Toolbar: alternar vista -->
<div class="collection-toolbar">
  <div class="view-toggle" role="group" aria-label="View toggle">
    <button class="btn-view" data-view="grid" aria-pressed="true" title="Grid view">ğŸ”² Grid</button>
    <button class="btn-view" data-view="list" aria-pressed="false" title="List view">ğŸ“ƒ List</button>
  </div>
</div>
  
<div class="collection-toolbar">
  <div class="view-toggle" role="group" aria-label="View toggle">
    <button class="btn-view" data-view="grid" aria-pressed="true" title="Grid view">ğŸ”² Grid</button>
    <button class="btn-view" data-view="list" aria-pressed="false" title="List view">ğŸ“ƒ List</button>
  </div>

  <!-- SORT BY (colado aqui) -->
  <div class="sort-wrap">
    <label for="sortSelect">Sort by:</label>
    <select id="sortSelect">
      <option value="default">Default</option>
      <option value="ratingDesc">Rating (High â†’ Low)</option>
      <option value="priceAsc">Price (Low â†’ High)</option>
      <option value="priceDesc">Price (High â†’ Low)</option>
    </select>
  </div>
</div>

  <!-- Itens da coleÃ§Ã£o -->
  <section class="collection-items grid-view">
    
    <div class="item-card" data-rating="9" data-price="25">
      <img src="img/luke.jpg" alt="Miniature of Luke Skywalker - Rebel Hero">
      <h3>Luke Skywalker</h3>
      <p>Rebel Hero</p>
      <div class="item-info">
        <span>â­ 9/10</span>
        <span>ğŸ’° 25â‚¬</span>
      </div>
      <button>View Details</button>
    </div>

    <div class="item-card" data-rating="10" data-price="40">
      <img src="img/vader.jpg" alt="Miniature of Darth Vader - Sith Lord">
      <h3>Darth Vader</h3>
      <p>Sith Lord</p>
      <div class="item-info">
        <span>â­ 10/10</span>
        <span>ğŸ’° 40â‚¬</span>
      </div>
      <button>View Details</button>
    </div>

    <div class="item-card" data-rating="8" data-price="30">
      <img src="img/leia.jpg" alt="Miniature of Princess Leia Organa - Rebel Leader">
      <h3>Princess Leia Organa</h3>
      <p>Rebel Leader</p>
      <div class="item-info">
        <span>â­ 8/10</span>
        <span>ğŸ’° 30â‚¬</span>
      </div>
      <button>View Details</button>
    </div>

    <div class="item-card" data-rating="9" data-price="28">
      <img src="img/han.jpg" alt="Miniature of Han Solo - Smuggler & Pilot">
      <h3>Han Solo</h3>
      <p>Smuggler & Pilot</p>
      <div class="item-info">
        <span>â­ 9/10</span>
        <span>ğŸ’° 28â‚¬</span>
      </div>
      <button>View Details</button>
    </div>

    <div class="item-card" data-rating="10" data-price="35">
      <img src="img/yoda.jpg" alt="Miniature of Yoda - Jedi Master">
      <h3>Yoda</h3>
      <p>Jedi Master</p>
      <div class="item-info">
        <span>â­ 10/10</span>
        <span>ğŸ’° 35â‚¬</span>
      </div>
      <button>View Details</button>
    </div>

    <div class="item-card" data-rating="7" data-price="15">
      <img src="img/stormtrooper.jpg" alt="Miniature of Stormtrooper - Imperial Soldier">
      <h3>Stormtrooper</h3>
      <p>Imperial Soldier</p>
      <div class="item-info">
        <span>â­ 7/10</span>
        <span>ğŸ’° 15â‚¬</span>
      </div>
      <button>View Details</button>
    </div>

    <div class="item-card" data-rating="9" data-price="22">
      <img src="img/r2d2.jpg" alt="Miniature of R2-D2 - Astromech Droid">
      <h3>R2-D2</h3>
      <p>Astromech Droid</p>
      <div class="item-info">
        <span>â­ 9/10</span>
        <span>ğŸ’° 22â‚¬</span>
      </div>
      <button>View Details</button>
    </div>

    <div class="item-card" data-rating="10" data-price="60">
      <img src="img/falcon.jpg" alt="Miniature of Millennium Falcon - Corellian Freighter">
      <h3>Millennium Falcon</h3>
      <p>Corellian Freighter</p>
      <div class="item-info">
        <span>â­ 10/10</span>
        <span>ğŸ’° 60â‚¬</span>
      </div>
      <button>View Details</button>
    </div>
      

  </section>
  <script>
  // ----- SORTING (rating/price) -----
  const itemsContainer = document.querySelector('.collection-items');
  const sortSelect = document.getElementById('sortSelect');

  // guardar ordem original para "Default"
  const originalOrder = [...itemsContainer.children].map((el, idx) => {
    el.dataset.__index = idx;  // Ã­ndice estÃ¡vel
    return el;
  });

  // aplica ordenaÃ§Ã£o guardada (ou default)
  const savedSort = localStorage.getItem('collectionSort') || 'default';
  if (sortSelect) sortSelect.value = savedSort;
  applySort(savedSort);

  if (sortSelect) {
    sortSelect.addEventListener('change', () => applySort(sortSelect.value));
  }

  function applySort(mode){
    const cards = [...itemsContainer.querySelectorAll('.item-card')];
    let sorted = cards.slice();

    const byNum = (getter, dir=1) => (a,b) => (getter(a)-getter(b))*dir;

    switch(mode){
      case 'ratingDesc':
        sorted.sort(byNum(el => Number(el.dataset.rating) || 0, -1));
        break;
      case 'priceAsc':
        sorted.sort(byNum(el => Number(el.dataset.price) || 0, +1));
        break;
      case 'priceDesc':
        sorted.sort(byNum(el => Number(el.dataset.price) || 0, -1));
        break;
      default: // ordem original
        sorted.sort(byNum(el => Number(el.dataset.__index), +1));
    }

    const frag = document.createDocumentFragment();
    sorted.forEach(el => frag.appendChild(el));
    itemsContainer.appendChild(frag);

    localStorage.setItem('collectionSort', mode);
  }
</script>







<!-- BotÃ£o Add Item -->
<div id="addItemModal" class="modal">
  <div class="modal-content">
    <h2>Add New Item</h2>
    <label>Name:</label>
    <input type="text" id="itemName" placeholder="Enter item name">

    <label>Description:</label>
    <input type="text" id="itemDesc" placeholder="Short description">

    <label>Importance (1â€“10):</label>
    <input type="number" id="itemRating" min="1" max="10" value="1">

    <label>Price (â‚¬):</label>
    <input type="number" id="itemPrice" min="0" step="0.01" value="0">

    <label>Date of acquisition:</label>
    <input type="date" id="itemDate">
    
    <label for="itemImage">Image:</label>
        <div id="dropZone" class="drop-zone">
            <p>Drag & drop an image here, or click to select</p>
            <input type="file" id="itemImage" accept="image/*" hidden>
        </div>

    <div class="modal-buttons">
      <button id="saveItem">ğŸ’¾ Save</button>
      <button id="cancelItem">âŒ Cancel</button>
    </div>
  </div>
</div>






  <!-- BotÃ£o Add Item -->
  <button class="add-item-btn">â• Add Item</button>
  <script>
// ======== LÃ“GICA DO FORMULÃRIO ========
const addItemBtn = document.querySelector('.add-item-btn');
const modal = document.getElementById('addItemModal');
const cancelBtn = document.getElementById('cancelItem');
const saveBtn = document.getElementById('saveItem');
const collection = document.querySelector('.collection-items');

/* --- ï¸UPLOAD DA IMAGEM--- */
const dropZone = document.getElementById('dropZone');
const fileInput = document.getElementById('itemImage');
let uploadedImageURL = "img/default.jpg";

// clicar na zona abre o seletor de ficheiro
dropZone.addEventListener('click', () => fileInput.click());

// quando o ficheiro Ã© selecionado
fileInput.addEventListener('change', () => {
  const file = fileInput.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = e => {
      uploadedImageURL = e.target.result; // guarda a imagem em base64
      dropZone.innerHTML = `<img src="${uploadedImageURL}" alt="Preview" style="max-width:100%; border-radius:8px;">`;
    };
    reader.readAsDataURL(file);
  }
});

// suporte a arrastar e largar
dropZone.addEventListener('dragover', e => {
  e.preventDefault();
  dropZone.classList.add('dragover');
});
dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));
dropZone.addEventListener('drop', e => {
  e.preventDefault();
  dropZone.classList.remove('dragover');
  const file = e.dataTransfer.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = ev => {
      uploadedImageURL = ev.target.result;
      dropZone.innerHTML = `<img src="${uploadedImageURL}" alt="Preview" style="max-width:100%; border-radius:8px;">`;
    };
    reader.readAsDataURL(file);
  }
});

// Abrir modal
addItemBtn.addEventListener('click', () => {
  modal.style.display = 'flex';
});

// Fechar modal
cancelBtn.addEventListener('click', () => {
  modal.style.display = 'none';
});

// Guardar novo item
saveBtn.addEventListener('click', () => {
  const name = document.getElementById('itemName').value.trim();
  const desc = document.getElementById('itemDesc').value.trim();
  const rating = document.getElementById('itemRating').value.trim();
  const price = document.getElementById('itemPrice').value.trim();

  // Verificar campos obrigatÃ³rios
  if(!name || !desc){
    alert("Please fill in all required fields.");
    return;
  }

  // Garantir que rating estÃ¡ entre 1 e 10
  const ratingNum = Number(rating);
  if (ratingNum < 1 || ratingNum > 10) {
    alert("Rating must be between 1 and 10.");
    return;
  }

  // Criar novo card
  const newCard = document.createElement('div');
  newCard.classList.add('item-card');
  newCard.dataset.rating = rating || 0;
  newCard.dataset.price = price || 0;
  newCard.innerHTML = `
    <img src="${uploadedImageURL}" alt="${name}">
    <h3>${name}</h3>
    <p>${desc}</p>
    <div class="item-info">
      <span>â­ ${rating}/10</span>
      <span>ğŸ’° ${price}â‚¬</span>
    </div>
    <button>View Details</button>
  `;

  // Adicionar ao ecrÃ£
  collection.appendChild(newCard);

  // Fechar modal e limpar campos
  modal.style.display = 'none';
  document.querySelectorAll('#addItemModal input').forEach(i => i.value = '');
  uploadedImageURL = "img/default.jpg"; // repÃµe imagem default
  dropZone.innerHTML = '<p>Drag & drop an image here, or click to select</p>';
});

</script>

</body>
</html>
